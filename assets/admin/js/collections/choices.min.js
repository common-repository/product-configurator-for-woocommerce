var PC=PC||{};!function(i){PC.choices=Backbone.Collection.extend({model:PC.choice,initialize:function(e,t){this.layer=t.layer,this.layer&&(this.layer_type=this.layer.get("type"))},nextOrder:function(){return this.length?this.last().get("order")+1:1},comparator:wp.hooks.applyFilters("PC.choices.comparator",function(e){return e.get("order")}),deactivateAll:function(){this.each(function(e){e.set("active",!1)})},resetChoice:function(e){var t;this.deactivateAll(),this.layer_type&&"simple"!==this.layer_type?"multiple"!==this.layer_type||!e&&void 0!==e||PC.fe.is_setting_config||(t=this.where({is_default:!0,available:!0}),i.each(t,function(e){e.set("active",!0)})):this.layer.get("default_selection")&&"select_first"!=this.layer.get("default_selection")||((t=this.findWhere({is_default:!0}))&&!1!==t.get("cshow")?t.set("active",!0):(e=this.findWhere({available:!0}))&&e.set("active",!0))},selectChoice:function(e,t){var e=this.get(e),i=e.get("active");if("simple"!==this.layer_type&&this.layer_type){if("multiple"===this.layer_type)if(i||!t&&void 0!==t)t||e.set("active",!1);else{if(!wp.hooks.applyFilters("PC.choices.canSelectChoice",!0,e,this))return void console.log("Collections > choices > selectChoice - The choice (multiple) can not be selected");e.set("active",!0)}}else if(i&&!t&&wp.hooks.applyFilters("PC.choices.canDeselectSimpleChoice",this.layer.get("can_deselect"),this))e.set("active",!1);else{if(i)return;this.deactivateAll(),e.set("active",!0)}wp.hooks.doAction("PC.fe.choice.change",e)},getType:function(){return this.layer_type}}),PC.content_list=Backbone.Collection.extend({model:PC.content,initialize:function(){},resetConfig:function(){this.each(function(e){PC.fe.layers.get(e.get("layerId")).get("not_a_choice")||e.get("choices").resetChoice()}.bind(this))}}),PC.choice_pictures=Backbone.Collection.extend({model:PC.choice_picture})}(PC._us||window._);